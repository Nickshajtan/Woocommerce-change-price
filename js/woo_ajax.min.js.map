{"version":3,"sources":["woo_ajax.min.js"],"names":["HCC_WOO_Ajax","$","jQuery","on","e","preventDefault","stopPropagation","functionName","customValid","$data","this","serializeArray","inputId","find","inputPr","input","not","respContainer","respHeader","ajax","type","url","ajaxurl","data","action","error","val","removeClass","addClass","err_msg","append","console","log","beforeSend","html","success","result","JSON","parse","errors","successes","inputIdVal","inputPrVal","complete","done","hcc_wc_ajax_params"],"mappings":"AAMA,SAASA,eACL,IAAIC,EAAIC,OACGD,EAAE,qBACRE,GAAG,UAAU,SAASC,GACvBA,EAAEC,iBACFD,EAAEE,kBAEyB,sBAAhBC,cACPC,cAGJ,IAAIC,EAAgBR,EAAES,MAAMC,iBACxBC,EAAgBX,EAAES,MAAMG,KAAK,2BAC7BC,EAAgBb,EAAES,MAAMG,KAAK,8BAC7BE,EAAgBd,EAAES,MAAMG,KAAK,SAASG,IAAI,wBAC1CC,EAAgBhB,EAAES,MAAMG,KAAK,iBAC7BK,EAAgBjB,EAAES,MAAMG,KAAK,oBA8HjC,OA7HAZ,EAAEkB,KAAK,CACOC,KAAM,OACNC,IAAKC,QACLC,KAAM,CACAC,OAAS,cACTD,KAAOd,GAEbgB,MAAO,WACH,IACIV,EAAMW,IAAI,IACVT,EAAcU,YAAY,cAAcC,SAAS,cACjDV,EAAWU,SAAS,cAAcD,YAAY,cACxB,oBAAXE,SACPZ,EAAca,OAAOD,SAG7B,MAAMzB,GACF2B,QAAQC,IAAI,6BAGpBC,WAAY,WACR,IACIhB,EAAciB,KAAK,IACnBhB,EAAWS,YAAY,yBACvBI,QAAQC,IAAK,YAAcvB,GAE/B,MAAML,GACF2B,QAAQC,IAAI,mCAGpBG,QAAS,SAAYC,GACjB,IACI,GAAIA,EAAQ,CACRL,QAAQC,IAAI,SAAWI,GACvB,IAAIb,EAAOc,KAAKC,MAAMF,GAGtB,GAFAL,QAAQC,IAAI,eAAiBT,GAEzBA,EAAKE,MAAO,CACV,IAAIc,EAAS,GACb,IAAK,IAAId,KAASF,EAAKgB,OACnBA,GAAU,wBAA0BhB,EAAKgB,OAAOd,GAAS,eAE7D,IACIV,EAAMW,IAAI,IACVT,EAAca,OAAOS,GACrBtB,EAAcU,YAAY,cAAcC,SAAS,cACjDV,EAAWS,YAAY,cAAcC,SAAS,cAElD,MAAMxB,GACF2B,QAAQC,IAAI,iCACU,oBAAXH,SACPZ,EAAca,OAAOD,UAKnC,GAAIN,EAAKY,QAAS,CACb,IAAIK,EAAY,GACZC,GAAa,EACbC,GAAa,EACjB,IAAK,IAAIP,KAAWZ,EAAKiB,UACJ,eAAZL,EACAM,EAAalB,EAAKiB,UAAUL,GAEX,kBAAZA,GAA2C,gBAAZA,EACpCO,EAAanB,EAAKiB,UAAUL,GAG5BK,GAAa,yBAA2BjB,EAAKiB,UAAUL,GAAW,eAG3E,IACQM,QAAmC,IAAdA,GACrB7B,EAAQc,IAAKe,GAEbC,QAAmC,IAAdA,GACrB5B,EAAQY,IAAKgB,GAEjBzB,EAAca,OAAOU,GACrBvB,EAAcU,YAAY,cAAcC,SAAS,cACjDV,EAAWU,SAAS,cAAcD,YAAY,cAEnD,MAAMvB,GACF2B,QAAQC,IAAI,iCACU,oBAAXH,SACPZ,EAAca,OAAOD,gBAMjCE,QAAQC,IAAI,4BACU,oBAAXH,SACPZ,EAAca,OAAOD,SAIjC,MAAMzB,GACF2B,QAAQC,IAAI,4BACU,oBAAXH,SACPZ,EAAca,OAAOD,WAIjCc,SAAU,eASrBC,MAAK,SAAUrB,GACd,IACIQ,QAAQC,IAAI,uBAEhB,MAAM5B,GACoB,oBAAXyB,UACPE,QAAQC,IAAIH,SACZZ,EAAca,OAAOD,eAK1B,KApJf3B,QAAO,SAASD,GACE4C,mBAAmBvB,QACnBuB,mBAAmBhB,QACjC7B","file":"woo_ajax.min.js","sourcesContent":["jQuery(function($){\r\n    var ajaxurl = hcc_wc_ajax_params.ajaxurl;\r\n    var err_msg = hcc_wc_ajax_params.err_msg;\r\n    HCC_WOO_Ajax();\r\n});\r\n\r\nfunction HCC_WOO_Ajax(){\r\n    var $ = jQuery;\r\n    let form = $('form.hcc_woo_form');\r\n    form.on('submit', function(e){\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        \r\n        if (typeof functionName == 'customValid'){\r\n            customValid();   \r\n        }\r\n        \r\n        let $data         = $(this).serializeArray();\r\n        let inputId       = $(this).find('input[name=\"hcc-wc-id\"]');\r\n        let inputPr       = $(this).find('input[name=\"hcc-wc-price\"]');\r\n        let input         = $(this).find('input').not('input[type=\"submit\"]');\r\n        let respContainer = $(this).find('.response-msg');\r\n        let respHeader    = $(this).find('.header-response');\r\n        $.ajax({\r\n                      type: \"POST\",\r\n                      url: ajaxurl,\r\n                      data: {\r\n                            action : 'hcc_wc_ajax',\r\n                            data : $data,\r\n                      },\r\n                      error: (function() {\r\n                          try{\r\n                              input.val('');\r\n                              respContainer.removeClass('hcc-wc-scs').addClass('hcc-wc-err');\r\n                              respHeader.addClass('hcc-wc-err').removeClass('hcc-wc-scs');\r\n                              if( typeof err_msg !==\"undefined\" ){\r\n                                  respContainer.append(err_msg);\r\n                              }\r\n                          }\r\n                          catch(e){\r\n                              console.log('Error with POST request');\r\n                          }\r\n                      }),\r\n                      beforeSend: (function (){\r\n                          try{\r\n                              respContainer.html('');\r\n                              respHeader.removeClass('hcc-wc-scs hcc-wc-err');\r\n                              console.log( 'Sending: ' + $data );\r\n                          }\r\n                          catch(e){\r\n                              console.log('Can not find required element');\r\n                          }\r\n                      }),\r\n                      success: (function ( result ){     \r\n                          try{\r\n                              if( result ){\r\n                                  console.log('Data: ' + result);\r\n                                  var data = JSON.parse(result);\r\n                                  console.log('Data parse: ' + data);\r\n                                  \r\n                                  if (data.error) {\r\n                                        let errors = \"\";\r\n                                        for (let error in data.errors) {\r\n                                            errors += '<span class=\"er-mes\">' + data.errors[error] + '</span><br/>';\r\n                                        }  \r\n                                        try{\r\n                                            input.val('');\r\n                                            respContainer.append(errors);\r\n                                            respContainer.removeClass('hcc-wc-scs').addClass('hcc-wc-err');\r\n                                            respHeader.removeClass('hcc-wc-scs').addClass('hcc-wc-err');\r\n                                        }\r\n                                        catch(e){\r\n                                            console.log('Can not find required element');\r\n                                            if( typeof err_msg !==\"undefined\" ){\r\n                                                respContainer.append(err_msg);\r\n                                            }\r\n                                        }\r\n                                  }\r\n                                  \r\n                                  if( data.success ){\r\n                                       let successes = \"\";\r\n                                       let inputIdVal = false;\r\n                                       let inputPrVal = false;\r\n                                       for (let success in data.successes) {\r\n                                            if( success === 'product_id' ){\r\n                                                inputIdVal = data.successes[success];\r\n                                            }\r\n                                            else if( success === 'saved_regular' || success === 'saved_price' ){\r\n                                                inputPrVal = data.successes[success];\r\n                                            }\r\n                                            else{\r\n                                                successes += '<span class=\"scs-mes\">' + data.successes[success] + '</span><br/>';\r\n                                            }\r\n                                       } \r\n                                       try{\r\n                                           if( inputIdVal && typeof inputIdVal !==\"undefined\" ){\r\n                                               inputId.val( inputIdVal );\r\n                                           }\r\n                                           if( inputPrVal && typeof inputPrVal !==\"undefined\"){\r\n                                               inputPr.val( inputPrVal );\r\n                                           }\r\n                                           respContainer.append(successes);\r\n                                           respContainer.removeClass('hcc-wc-err').addClass('hcc-wc-scs');\r\n                                           respHeader.addClass('hcc-wc-scs').removeClass('hcc-wc-err');\r\n                                       }\r\n                                      catch(e){\r\n                                          console.log('Can not find required element');\r\n                                          if( typeof err_msg !==\"undefined\" ){\r\n                                              respContainer.append(err_msg);\r\n                                          }\r\n                                      }\r\n                                  }\r\n                              }\r\n                              else{\r\n                                  console.log('Error with POST result:2');\r\n                                  if( typeof err_msg !==\"undefined\" ){\r\n                                      respContainer.append(err_msg);\r\n                                  }\r\n                              }\r\n                          }\r\n                          catch(e){\r\n                              console.log('Error with POST result:1');\r\n                              if( typeof err_msg !==\"undefined\" ){\r\n                                  respContainer.append(err_msg);\r\n                              }\r\n                          }\r\n                      }),\r\n                      complete: (function (){\r\n                          try{}\r\n                          catch(e){\r\n                              console.log('Error with POST complete');\r\n                              if( typeof err_msg !==\"undefined\" ){\r\n                                  respContainer.append(err_msg);\r\n                              }\r\n                          }\r\n                      })\r\n        }).done(function (data) {\r\n            try{\r\n                console.log('End of ajax request');\r\n            }\r\n            catch(e){\r\n                if( typeof err_msg !==\"undefined\" ){\r\n                    console.log(err_msg);\r\n                    respContainer.append(err_msg);\r\n                }\r\n            }\r\n        });\r\n        \r\n        return false;\r\n    });\r\n}\r\n\r\n"]}